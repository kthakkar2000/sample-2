<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Product Page тАФ Product & Voice Bot</title>
  <style>
    :root{--bg:#f6f7fb;--card:#fff;--accent:#0b71ff;--muted:#6b7280}
    body{font-family:Inter,system-ui,Segoe UI,Roboto,Arial;margin:0;background:var(--bg);color:#111}
    .container{max-width:900px;margin:36px auto;padding:20px}
    header{display:flex;gap:16px;align-items:center}
    .logo{width:64px;height:64px;border-radius:12px;object-fit:contain;background:#fff;padding:6px}
    .title{font-size:20px;font-weight:700}
    .subtitle{color:var(--muted);font-size:13px}
    .card{background:var(--card);border-radius:12px;padding:20px;margin-top:18px;box-shadow:0 6px 18px rgba(16,24,40,0.06)}
    .grid{display:flex;gap:20px}
    .left{flex:1}
    .right{width:320px}
    .product-img{width:100%;height:360px;object-fit:contain;background:#fafafa;border-radius:8px}
    .thumbs{display:flex;gap:8px;margin-top:10px;flex-wrap:wrap}
    .thumbs img{width:72px;height:56px;object-fit:cover;border-radius:6px;cursor:pointer;border:2px solid transparent}
    .thumbs img.active{border-color:var(--accent);transform:translateY(-2px)}
    ul{padding-left:18px}
    .controls{display:flex;gap:8px;margin-top:12px}
    button{background:var(--accent);color:#fff;padding:10px 12px;border:none;border-radius:8px;cursor:pointer}
    button.secondary{background:#eef2ff;color:var(--accent);border:1px solid rgba(11,113,255,0.12)}
    .log{margin-top:12px;background:#f8fafc;padding:12px;border-radius:8px;color:var(--muted);min-height:60px}
    .hint{font-size:13px;color:var(--muted);margin-top:6px}
    footer{margin-top:20px;color:var(--muted);font-size:13px}
    .qr{display:inline-block;padding:8px;background:#fff;border-radius:8px}
    @media (max-width:880px){ .grid{flex-direction:column} .right{width:auto} }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <img id="logo" class="logo" src="assets/ktpl-new-logo.png" alt="logo"/>
      <div>
        <div id="productTitle" class="title">Product Title</div>
        <div id="productTag" class="subtitle">Short tagline or model number</div>
      </div>
    </header>

    <div class="card grid">
      <div class="left">
        <img id="productImg" class="product-img" src="assets/wm1.avif" alt="product"/>

        <!-- THUMBNAILS: will be filled by JS using PRODUCT_DATA.images -->
        <div id="thumbs" class="thumbs" aria-hidden="false"></div>

        <h3 style="margin-top:14px">Description</h3>
        <p id="productDesc">Product description goes here. This text explains main benefits and short summary. Use this for QR spoken description.</p>

        <h4 style="margin-top:10px">Features</h4>
        <ul id="featuresList">
          <li>Feature 1</li>
          <li>Feature 2</li>
        </ul>

        <div class="hint">Tip: Duplicate this file for every product and change the PRODUCT_DATA below, or host small JSON files under <code>products/</code> and open with <code>?id=product-id</code>.</div>
      </div>

      <div class="right">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <div style="font-weight:700">Voice Assistant</div>
            <div class="subtitle">Ask about this product тАФ speak or type</div>
          </div>
          <div class="qr">QR: <small id="qrHint">Scan to open</small></div>
        </div>

        <div style="margin-top:12px">
          <textarea id="userText" placeholder="Type your question..." style="width:100%;height:88px;padding:8px;border-radius:8px;border:1px solid #eef2ff"></textarea>

          <!-- Language toggle -->
          <div style="margin-top:8px; display:flex; gap:8px; align-items:center;">
            <label style="font-weight:600">Language:</label>
            <select id="langSelect" style="padding:6px 10px; border-radius:8px;">
              <option value="en">English</option>
              <option value="gu">ркЧрлБркЬрк░рк╛ркдрлА</option>
            </select>
          </div>

          <div class="controls" style="margin-top:10px">
            <button id="startBtn">ЁЯОд Speak</button>
            <button id="askBtn" class="secondary">Ask</button>
            <button id="readDescBtn" class="secondary">ЁЯФК Read Description</button>
          </div>
          <div class="log" id="botLog">Assistant ready. Try: "How much water does it use?"</div>
        </div>

        <div style="margin-top:14px">
          <div style="font-weight:700">Specs</div>
          <table style="width:100%;margin-top:6px">
            <tr><td class="subtitle">Capacity</td><td id="specCapacity">7 kg</td></tr>
            <tr><td class="subtitle">Spin Speed</td><td id="specSpin">1200 RPM</td></tr>
            <tr><td class="subtitle">Energy</td><td id="specEnergy">5 Star</td></tr>
            <tr><td class="subtitle">Warranty</td><td id="specWarranty">2 yrs</td></tr>
          </table>
        </div>
      </div>
    </div>

    <footer>
      To generate a QR for this product page: create a link to this page (for example <code>https://yourshop.github.io/product-page.html?id=washing-machine-7kg</code>) and make a QR from that URL. Host the file and any <code>products/*.json</code> on GitHub Pages or any static host.
    </footer>
  </div>

  <script>
    /* ======================================================
       Gallery + English/ Gujarati voice bot (client-only)
       - Place images in assets/:
         assets/wm1.avif ... assets/wm5.avif
         assets/ktpl-new-logo.png
       ======================================================== */

    // ------------------ CANNED RESPONSES (EN + GU) ------------------
    const canned = [
      { q: /price|cost|тВ╣|rupee/i, a: 'The price of this model is Sixty five thousand rupees only.', gu: 'ркЖ ркорлЛркбрлЗрк▓ркирлА ркХрк┐ркВркоркд рк░рлВ. 65,000 ркЫрлЗ. рк╕рлНркЯрлЛрк░ркорк╛ркВ EMI ркЕркирлЗ exchange ркЙрккрк▓ркмрлНркз ркЫрлЗ.' },
      { q: /stock|available/i, a: 'This model has only 4 pieces left in stock. We also offer EMI and exchange options in-store.', gu: 'ркЖ ркорлЛркбрлЗрк▓ркирк╛ рк╕рлНркЯрлЛркХркорк╛ркВ рклркХрлНркд 4 рккрлАрк╕ ркмрк╛ркХрлА ркЫрлЗ. ркЕркорлЗ рк╕рлНркЯрлЛрк░ркорк╛ркВ EMI ркЕркирлЗ ркПркХрлНрк╕ркЪрлЗркирлНркЬ рк╡рк┐ркХрк▓рлНрккрлЛ рккркг рккрлНрк░ркжрк╛рки ркХрк░рлАркП ркЫрлАркП.' },
      { q: /warrant(?:y|ies)|guarantee/i, a: 'This product comes with a two year manufacturer warranty covering defects and parts.', gu: 'ркЖ ркЙркдрлНрккрк╛ркжрки рк╕рк╛ркерлЗ 2 рк╡рк░рлНрк╖ркирлА рк╡рлЛрк░ркВркЯрлА ркорк│рлЗ ркЫрлЗ ркЬрлЗ ркЦрк╛ркорлА ркЕркирлЗ ркнрк╛ркЧрлЛркирлЗ рквркХрлЗ ркЫрлЗ.' },
      { q: /capacity|kg|weight/i, a: 'The machine has a 12 kilogram capacity тАФ suitable for small families.', gu: 'ркЖ ркорк╢рлАркиркирлА ркХрлНрк╖ркоркдрк╛ 12 ркХрк┐ркЧрлНрк░рк╛ ркЫрлЗ тАФ ркирк╛ркирк╛ркВ рккрк░рк┐рк╡рк╛рк░рлЛ ркорк╛ркЯрлЗ рккрлВрк░ркдрлА.' },
      { q: /rpm|spin|speed/i, a: 'Maximum spin speed is 1200 RPM which helps remove more water and reduce drying time.', gu: 'ркорк╣ркдрлНркдрко рк╕рлНрккрк┐рки рк╕рлНрккрлАркб 1200 RPM ркЫрлЗ ркЬрлЗ рк╡ркзрлБ рккрк╛ркгрлА ркжрлВрк░ ркХрк░рк╡рк╛ркорк╛ркВ ркЕркирлЗ рк╕рлВркХрк╡рк╛ркирлЗ ркЯрлВркВркХрк╛рк╡ркорк╛ркВ ркоркжркж ркХрк░рлЗ ркЫрлЗ.' },
      { q: /energy|star/i, a: 'This is a 5-star energy rated appliance тАФ very efficient on power consumption.', gu: 'ркЖ ркПркХ 5-рк╕рлНркЯрк╛рк░ ркПркирк░рлНркЬрлА рк░рлЗркЯрлЗркб ркЙрккркХрк░ркг ркЫрлЗ тАФ рккрк╛рк╡рк░ ркЦрк░рлНркЪркорк╛ркВ ркЦрлВркм ркЕрк╕рк░ркХрк╛рк░ркХ.' },
      { q: /how to clean|clean|care/i, a: 'Use a mild detergent, run monthly drum clean cycle and wipe the door seal to avoid residue.', gu: 'рк╣рк│рк╡рлЛ ркбрк┐ркЯрк░рлНркЬрлЗркирлНркЯ рк╡рк╛рккрк░рлЛ, ркорк╛рк╕рк┐ркХ ркбрлНрк░рко ркХрлНрк▓рлАрки рк╕рк╛ркИркХрк▓ ркЪрк▓рк╛рк╡рлЛ ркЕркирлЗ ркбрлЛрк░ рк╕рлАрк▓ рк╕рк╛ркл ркХрк░рлЛ.' },
      { q: /brand|company|model/i, a: 'This model is from ABC Electronics, known for durability and advanced features.', gu: 'ркЖ ркорлЛркбрлЗрк▓ ABC ркЗрк▓рлЗркХрлНркЯрлНрк░рлЛркирк┐ркХрлНрк╕ркирлБркВ ркЫрлЗ, ркЬрлЗ ркЯркХрк╛ркЙрккркгрлБркВ ркЕркирлЗ ркЕркжрлНркпркдрки рк╕рлБрк╡рк┐ркзрк╛ркУ ркорк╛ркЯрлЗ ркЬрк╛ркгрлАркдрлБркВ ркЫрлЗ.' },
      { q: /size|dimension|height|width|depth/i, a: 'The machine measures 85 cm in height, 60 cm in width and 55 cm in depth.', gu: 'ркЖ ркорк╢рлАркиркирлА ркКркВркЪрк╛ркИ 85 рк╕рлЗркорлА, рккрк╣рлЛрк│рк╛ркИ 60 рк╕рлЗркорлА ркЕркирлЗ ркКркВркбрк╛ркИ 55 рк╕рлЗркорлА ркЫрлЗ.' },
      { q: /water|litre|consumption/i, a: 'This model consumes approximately 60 liters of water per full wash cycle.', gu: 'ркЖ ркорлЛркбрлЗрк▓ ркжрк░рлЗркХ рккрлВрк░рлНркг рк╡рлЛрк╢ рк╕рк╛ркпркХрк▓ркорк╛ркВ ркЕркВркжрк╛ркЬрлЗ 60 рк▓рк┐ркЯрк░ рккрк╛ркгрлА рк╡рк╛рккрк░рлЗ ркЫрлЗ.' },
      { q: /noise|sound|db|decibel/i, a: 'The machine operates at 52 dB during wash and 72 dB during spin тАФ relatively quiet.', gu: 'ркЖ ркорк╢рлАрки ркзрлЛрк╡рк╛ркирлА рккрлНрк░ркХрлНрк░рк┐ркпрк╛ркорк╛ркВ 52 dB ркЕркирлЗ рк╕рлНрккрк┐рки ркжрк░ркорк┐ркпрк╛рки 72 dB рккрк░ ркХрк╛рк░рлНркп ркХрк░рлЗ ркЫрлЗ тАФ ркдрлБрк▓ркирк╛ркдрлНркоркХ рк░рлАркдрлЗ рк╢рк╛ркВркд ркЫрлЗ.' },
      { q: /delivery|install|setup/i, a: 'Free delivery and installation are provided within city limits.', gu: 'рк╢рк╣рлЗрк░ркирлА ркЕркВркжрк░ ркорклркд ркбрк┐рк▓рк┐рк╡рк░рлА ркЕркирлЗ ркЗркирлНрк╕рлНркЯрлЛрк▓рлЗрк╢рки ркЖрккрк╡рк╛ркорк╛ркВ ркЖрк╡рлЗ ркЫрлЗ.' },
      { q: /offer|discount|deal|sale/i, a: 'We currently have a festive discount available. Please check in-store for final price.', gu: 'рк╣рк╛рк▓ркорк╛ркВ ркдрк╣рлЗрк╡рк╛рк░рлЛркорк╛ркВ ркбрк┐рк╕рлНркХрк╛ркЙркирлНркЯ ркЙрккрк▓ркмрлНркз ркЫрлЗ. ркЕркВркдрк┐рко ркХрк┐ркВркоркд ркорк╛ркЯрлЗ рк╕рлНркЯрлЛрк░ркорк╛ркВ ркдрккрк╛рк╕рлЛ.' },
      { q: /service|repair|support|help/i, a: 'We provide doorstep service and free checkups during warranty period.', gu: 'ркЕркорлЗ рк╡рлЛрк░ркВркЯрлА рк╕ркоркпркЧрк╛рк│рк╛ ркжрк░ркорк┐ркпрк╛рки ркбрлЛрк░рк╕рлНркЯрлЗркк рк╕рк░рлНрк╡рк┐рк╕ ркЕркирлЗ ркорклркд ркЪрлЗркХркЕрккрлНрк╕ рккрлНрк░ркжрк╛рки ркХрк░рлАркП ркЫрлАркП.' },
      { q: /exchange|old machine|return/i, a: 'You can exchange your old appliance and get up to тВ╣5,000 off.', gu: 'ркдркорлЗ ркдркорк╛рк░рлБркВ ркЬрлВркирлБркВ ркЙрккркХрк░ркг ркПркХрлНрк╕ркЪрлЗркирлНркЬ ркХрк░рлА рк╢ркХрлЛ ркЫрлЛ ркЕркирлЗ тВ╣5,000 рк╕рлБркзрлАркирлА ркЫрлВркЯ ркорлЗрк│рк╡рлА рк╢ркХрлЛ ркЫрлЛ.' },
      { q: /.*/, a: 'Sorry, I do not have that exact information. You can ask about price, capacity, warranty or cleaning and I will answer.', gu: 'ркорк╛ркл ркХрк░рк╢рлЛ, ркорк╛рк░рк╛ рккрк╛рк╕рлЗ ркдрлЗ ркЪрлЛркХрлНркХрк╕ ркорк╛рк╣рк┐ркдрлА ркиркерлА. ркдркорлЗ ркХрк┐ркВркоркд, ркХрлНрк╖ркоркдрк╛, рк╡рлЛрк░ркВркЯрлА ркЕркерк╡рк╛ рк╕рк╛рклрк╕рклрк╛ркИ рк╡рк┐рк╢рлЗ рккрлВркЫрлЛ.' }
    ];

    // ------------------ PRODUCT DATA (images array included) ------------------
    const PRODUCT_DATA = {
      id: 'washing-machine-7kg',
      title: 'SuperClean 7 kg Front Load',
      title_gu: 'рк╕рлЛрккрк░ркХрлНрк▓рлАрки 7 ркХрк┐ркЧрлНрк░рк╛ рклрлНрк░ркирлНркЯ рк▓рлЛркб',
      tagline: 'Efficient тАв Quiet тАв Durable',
      img: 'assets/wm1.avif',
      images: [
        'assets/wm1.avif',
        'assets/wm2.avif',
        'assets/wm3.avif',
        'assets/wm4.avif',
        'assets/wm5.avif'
      ],
      logo: 'assets/ktpl-new-logo.png',
      description: 'This 7 kg front-load washing machine provides powerful cleaning with inverter technology, 8 wash programs, and a stainless steel drum for gentle care. Ideal for small to medium families.',
      description_gu: 'ркЖ 7 ркХрк┐ркЧрлНрк░рк╛ рклрлНрк░ркирлНркЯ-рк▓рлЛркб рк╡рлЛрк╢рк┐ркВркЧ ркорк╢рлАрки ркЗркирлНрк╡рк░рлНркЯрк░ ркЯрлЗркХрлНркирлЛрк▓рлЛркЬрлА ркЕркирлЗ 8 рк╡рлЛрк╢ рккрлНрк░рлЛркЧрлНрк░рк╛ркорлНрк╕ рк╕рк╛ркерлЗ рк╢ркХрлНркдрк┐рк╢рк╛рк│рлА рк╕рклрк╛ркИ ркЖрккрлЗ ркЫрлЗ. ркирк╛ркирк╛-ркоркзрлНркпрко рккрк░рк┐рк╡рк╛рк░рлЛ ркорк╛ркЯрлЗ ркЖркжрк░рлНрк╢.',
      features: ['7 kg capacity', 'Inverter motor', 'Quick wash 30 min', 'Child lock', '1200 RPM spin'],
      features_gu: ['7 ркХрк┐ркЧрлНрк░рк╛ ркХрлНрк╖ркоркдрк╛', 'ркЗркирлНрк╡рк░рлНркЯрк░ ркорлЛркЯрк░', 'рклрк╛рк╕рлНркЯ рк╡рлЛрк╢ 30 ркорк┐ркирк┐ркЯ', 'ркмрк╛рк│ркХрлЛ ркорк╛ркЯрлЗ рк▓рлЛркХ', '1200 RPM'],
      specs: { capacity: '7 kg', spin: '1200 RPM', energy: '5 Star', warranty: '2 years product / 10 years motor' },
      specs_gu: { ркХрлНрк╖ркоркдрк╛: '7 ркХрк┐ркЧрлНрк░рк╛', рк╕рлНрккрк┐рки: '1200 RPM', ркПркирк░рлНркЬрлА: '5 рк╕рлНркЯрк╛рк░', рк╡рлЛрк░ркВркЯрлА: '2 рк╡рк░рлНрк╖ рккрлНрк░рлЛркбркХрлНркЯ / 10 рк╡рк░рлНрк╖ ркорлЛркЯрк░' }
    };

    // ------------------ Helpers ------------------
    function isGujaratiText(s){ return /[\u0A80-\u0AFF]/.test(String(s)); }
    function appendLog(txt){ const el=document.getElementById('botLog'); if(el) el.textContent = txt; }

    // ------------------ Load product & render thumbs ------------------
    async function loadProduct(){
      const params = new URLSearchParams(location.search);
      const id = params.get('id');
      let data = PRODUCT_DATA;
      if(id){
        try{
          const resp = await fetch('products/' + id + '.json');
          if(resp.ok) data = await resp.json();
        }catch(e){ console.warn('Could not load products/'+id+'.json тАФ using inline PRODUCT_DATA') }
      }

      // language param
      const langParam = params.get('lang');
      window._LANG = langParam === 'gu' ? 'gu' : 'en';

      // populate UI
      const title = (window._LANG==='gu' && data.title_gu) ? data.title_gu : data.title;
      document.getElementById('productTitle').textContent = title;
      document.getElementById('productTag').textContent = data.tagline || '';
      document.getElementById('productImg').src = data.img || (data.images && data.images[0]) || 'assets/default-product.png';
      document.getElementById('logo').src = data.logo || 'assets/ktpl-new-logo.png';
      document.getElementById('productDesc').textContent = (window._LANG==='gu' && data.description_gu) ? data.description_gu : data.description;

      // features
      const fl = document.getElementById('featuresList'); fl.innerHTML = '';
      const feats = (window._LANG==='gu' && data.features_gu) ? data.features_gu : data.features || [];
      feats.forEach(f=>{ const li=document.createElement('li'); li.textContent=f; fl.appendChild(li); });

      // specs (choose GU keys if present)
      document.getElementById('specCapacity').textContent = (window._LANG==='gu' && data.specs_gu && data.specs_gu["ркХрлНрк╖ркоркдрк╛"]) ? data.specs_gu["ркХрлНрк╖ркоркдрк╛"] : (data.specs?.capacity || '');
      document.getElementById('specSpin').textContent = (window._LANG==='gu' && data.specs_gu && data.specs_gu["рк╕рлНрккрк┐рки"]) ? data.specs_gu["рк╕рлНрккрк┐рки"] : (data.specs?.spin || '');
      document.getElementById('specEnergy').textContent = (window._LANG==='gu' && data.specs_gu && data.specs_gu["ркПркирк░рлНркЬрлА"]) ? data.specs_gu["ркПркирк░рлНркЬрлА"] : (data.specs?.energy || '');
      document.getElementById('specWarranty').textContent = (window._LANG==='gu' && data.specs_gu && data.specs_gu["рк╡рлЛрк░ркВркЯрлА"]) ? data.specs_gu["рк╡рлЛрк░ркВркЯрлА"] : (data.specs?.warranty || '');

      // QR hint
      const currentUrl = location.href.split('#')[0];
      document.getElementById('qrHint').textContent = currentUrl;

      window._PRODUCT = data;

      // thumbs
      const thumbsWrap = document.getElementById('thumbs'); thumbsWrap.innerHTML = '';
      const imgs = data.images && data.images.length ? data.images : [data.img];
      imgs.forEach((src, idx) => {
        const im = document.createElement('img');
        im.src = src;
        if(idx===0) im.classList.add('active');
        im.onclick = () => {
          document.getElementById('productImg').src = src;
          thumbsWrap.querySelectorAll('img').forEach(x=>x.classList.remove('active'));
          im.classList.add('active');
        };
        thumbsWrap.appendChild(im);
      });
    }

    loadProduct();

    // ------------------ TTS ------------------
    function speak(text){
      if(!('speechSynthesis' in window)){ appendLog('Speech synthesis not supported'); return; }
      const u = new SpeechSynthesisUtterance(text);
      const lang = (window._LANG === 'gu' || isGujaratiText(text)) ? 'gu-IN' : 'en-IN';
      u.lang = lang; u.rate = 1; u.pitch = 1;
      const voices = window.speechSynthesis.getVoices();
      if(voices && voices.length){
        const v = voices.find(x=> x.lang && x.lang.toLowerCase().startsWith(lang.toLowerCase()));
        if(v) u.voice = v;
      } else {
        window.speechSynthesis.onvoiceschanged = ()=> {
          const v2 = window.speechSynthesis.getVoices().find(x=> x.lang && x.lang.toLowerCase().startsWith(lang.toLowerCase()));
          if(v2) u.voice = v2;
          window.speechSynthesis.speak(u);
        };
      }
      window.speechSynthesis.cancel();
      window.speechSynthesis.speak(u);
    }

    // ------------------ localAnswer using canned ------------------
    function localAnswer(q){
      if(!q){ const fb=canned[canned.length-1]; return (window._LANG==='gu') ? fb.gu : fb.a; }
      const text = String(q).trim();
      const preferGu = (window._LANG === 'gu') || isGujaratiText(text);
      for(let i=0;i<canned.length;i++){
        try{ if(canned[i].q.test(text)) return preferGu ? (canned[i].gu || canned[i].a) : (canned[i].a || canned[i].gu); }
        catch(e){ console.warn('Invalid regex', e); }
      }
      const fb=canned[canned.length-1]; return preferGu ? fb.gu : fb.a;
    }

    // ------------------ UI handlers ------------------
    document.getElementById('askBtn').addEventListener('click', ()=>{
      const q = document.getElementById('userText').value.trim(); if(!q) return;
      appendLog('You: ' + q);
      const ans = localAnswer(q);
      appendLog((window._LANG==='gu' ? 'рк╕рк╣рк╛ркпркХ: ' : 'Assistant: ') + ans);
      speak(ans);
    });

    document.getElementById('readDescBtn').addEventListener('click', ()=>{
      const p = window._PRODUCT || PRODUCT_DATA;
      const text = (window._LANG==='gu' && p.description_gu) ? p.description_gu : p.description;
      appendLog('Reading description...');
      speak(text);
    });

    document.getElementById('langSelect').addEventListener('change', (e)=>{
      window._LANG = e.target.value === 'gu' ? 'gu' : 'en';
      const p = window._PRODUCT || PRODUCT_DATA;
      document.getElementById('productTitle').textContent = (window._LANG==='gu' && p.title_gu) ? p.title_gu : p.title;
      document.getElementById('productDesc').textContent = (window._LANG==='gu' && p.description_gu) ? p.description_gu : p.description;
      const fl = document.getElementById('featuresList'); fl.innerHTML = '';
      const feats = (window._LANG==='gu' && p.features_gu) ? p.features_gu : p.features || [];
      feats.forEach(f=>{ const li=document.createElement('li'); li.textContent=f; fl.appendChild(li); });
      document.getElementById('specCapacity').textContent = (window._LANG==='gu' && p.specs_gu && p.specs_gu["ркХрлНрк╖ркоркдрк╛"]) ? p.specs_gu["ркХрлНрк╖ркоркдрк╛"] : (p.specs?.capacity || '');
      document.getElementById('specSpin').textContent = (window._LANG==='gu' && p.specs_gu && p.specs_gu["рк╕рлНрккрк┐рки"]) ? p.specs_gu["рк╕рлНрккрк┐рки"] : (p.specs?.spin || '');
      document.getElementById('specEnergy').textContent = (window._LANG==='gu' && p.specs_gu && p.specs_gu["ркПркирк░рлНркЬрлА"]) ? p.specs_gu["ркПркирк░рлНркЬрлА"] : (p.specs?.energy || '');
      document.getElementById('specWarranty').textContent = (window._LANG==='gu' && p.specs_gu && p.specs_gu["рк╡рлЛрк░ркВркЯрлА"]) ? p.specs_gu["рк╡рлЛрк░ркВркЯрлА"] : (p.specs?.warranty || '');
    });

    // ------------------ Speech recognition ------------------
    let recognizing=false, recognition=null;
    const startBtn = document.getElementById('startBtn');
    try {
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      if(SpeechRecognition){
        recognition = new SpeechRecognition();
        recognition.lang = 'en-IN'; recognition.interimResults = false; recognition.maxAlternatives = 1;
        recognition.onstart = ()=>{ recognizing=true; startBtn.textContent='ЁЯОЩя╕П Listening... (click to stop)'; }
        recognition.onend = ()=>{ recognizing=false; startBtn.textContent='ЁЯОд Speak'; }
        recognition.onerror = (e)=>{ appendLog('Recognition error: '+e.error); }
        recognition.onresult = (ev)=>{
          const text = ev.results[0][0].transcript;
          document.getElementById('userText').value = text;
          appendLog('You (spoken): ' + text);
          if(isGujaratiText(text)) window._LANG = 'gu';
          const a = localAnswer(text);
          appendLog((window._LANG==='gu' ? 'рк╕рк╣рк╛ркпркХ: ' : 'Assistant: ') + a);
          speak(a);
        };
      } else { startBtn.style.display='none'; appendLog('Speech Recognition not supported in this browser'); }
    } catch(e){ console.error(e); startBtn.style.display='none'; }

    startBtn.addEventListener('click', ()=>{
      if(!recognition){
        const q = prompt((window._LANG==='gu') ? 'рк╡рк╛ркХрлНркп рк▓ркЦрлЛ:' : 'Type your question:');
        if(q){ document.getElementById('userText').value=q; const a=localAnswer(q); appendLog((window._LANG==='gu'?'рк╕рк╣рк╛ркпркХ: ':'Assistant: ')+a); speak(a); }
        return;
      }
      if(recognizing) recognition.stop(); else { recognition.lang = (window._LANG==='gu') ? 'gu-IN' : 'en-IN'; recognition.start(); }
    });

    // End script
  </script>
</body>
</html>
